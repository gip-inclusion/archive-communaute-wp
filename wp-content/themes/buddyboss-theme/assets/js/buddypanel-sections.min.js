/*! 
 * BuddyBoss Theme JavaScript Library 
 * @package BuddyBoss Theme 
 */
!function(C){"use strict";window.BuddyPanelSections={init:function(){if(void 0!==window.wpNavMenu){var a=0,o="",d="";C(document).on("click","#buddypanel-menu .button-controls #submit-buddypanel-section-menu",function(){var e=C("#menu").val(),n=C("#menu-settings-column-nonce").val(),t=window.wpNavMenu.addMenuItemToBottom,i={action:"add-menu-item",menu:e,"menu-settings-column-nonce":n,"menu-item":{"-1":{"menu-item-object-id":Math.floor(1e16*Math.random()),"menu-item-object":"custom","menu-item-patent-id":0,"menu-item-type":"custom","menu-item-description":"bb-theme-section","menu-item-title":wp.i18n.__("Get Started")}}};C("#buddypanel-menu").find(".button-controls .spinner").addClass("is-active"),C.post(ajaxurl,i,function(e){var n=C("#menu-instructions");C("#buddypanel-menu").find(".button-controls .spinner").removeClass("is-active"),e=(e=e||"").toString().trim(),t(e,i),C("li.pending").hide().fadeIn("slow"),C(".drag-instructions").show(),!n.hasClass("menu-instructions-inactive")&&n.siblings().length&&n.addClass("menu-instructions-inactive")})}),C("#menu-to-edit").on("sortstart",function(e,n){o=n.item.children(".menu-item-transport")}),C("#menu-to-edit").on("sortstop",function(e,n){var t=n.item,i=t.menuItemDepth();0<C(t).prev(".menu-item-section").length&&0<a&&(d=o.children().insertAfter(n.item)),setTimeout(function(){0<C(t).prev(".menu-item-section").length&&0<a&&(t.updateDepthClass(0),window.BuddyPanelSections.bb_shiftDepthClass(1,d,i),t.updateParentMenuItemDBId(),window.wpNavMenu.refreshKeyboardAccessibility(),window.wpNavMenu.refreshAdvancedAccessibility()),C(t).hasClass("menu-item-section")&&0<a&&(t.find(".item-title .is-submenu").hide(),t.find("input.menu-item-data-parent-id").val(0),t.updateDepthClass(0),window.wpNavMenu.menuList.sortable("cancel")),!(C(t).hasClass("menu-item-section")&&0<C(t).prev().length&&0<C(t).next().length)||C(t).prev().hasClass("menu-item-depth-0")&&C(t).next().hasClass("menu-item-depth-0")||(t.find(".item-title .is-submenu").hide(),t.find("input.menu-item-data-parent-id").val(0),t.updateDepthClass(0),window.wpNavMenu.menuList.sortable("cancel"))})}),C("#menu-to-edit").on("sort",function(e,n){var t=n.helper.offset(),i=window.wpNavMenu.menuList.offset().left,o=window.wpNavMenu.isRTL?t.left+n.helper.width():t.left;a=window.wpNavMenu.negateIfRTL*window.wpNavMenu.pxToDepth(o-i)}),C("#menu-to-edit").on("click","a.item-edit",function(){var e=jQuery(this).closest(".menu-item-section");0<e.length&&(e.find(".field-url").css("display","none"),e.find(".field-icon").css("display","none"),e.find(".field-stick_to_bottom").css("display","none"),e.find(".field-description").css("display","none"),e.find(".field-description textarea").attr("readonly","readonly"))}),C(".menu-theme-locations input").on("change",function(){!1===C("#locations-mobile-menu-logged-in").length&&C("#locations-mobile-menu-logged-in").prop("checked")&&!1===C("#locations-mobile-menu-logged-out").length&&C("#locations-mobile-menu-logged-out").prop("checked")&&!1===C("#locations-buddypanel-loggedin").length&&C("#locations-buddypanel-loggedin").prop("checked")&&!1===C("#locations-buddypanel-loggedout").length&&C("#locations-buddypanel-loggedout").prop("checked")?(C("#buddypanel-menu p.button-controls").hide(),C("#buddypanel-menu p.warning").show(),(0<C("#locations-mobile-menu-logged-in").parent().find(".theme-location-set").length||0<C("#locations-mobile-menu-logged-out").parent().find(".theme-location-set").length||0<C("#locations-buddypanel-loggedin").parent().find(".theme-location-set").length||0<C("#locations-buddypanel-loggedout").parent().find(".theme-location-set").length)&&C("#add-buddypanel-sections-nav-menu").hide()):(C("#add-buddypanel-sections-nav-menu").show(),C("#buddypanel-menu p.button-controls").show(),C("#buddypanel-menu p.warning").hide())}),(0<C("#locations-mobile-menu-logged-in").parent().find(".theme-location-set").length||0<C("#locations-mobile-menu-logged-out").parent().find(".theme-location-set").length||0<C("#locations-buddypanel-loggedin").parent().find(".theme-location-set").length||0<C("#locations-buddypanel-loggedout").parent().find(".theme-location-set").length)&&C("#add-buddypanel-sections-nav-menu").hide(),!1===C("#locations-mobile-menu-logged-in").length&&C("#locations-mobile-menu-logged-in").prop("checked")&&!1===C("#locations-mobile-menu-logged-out").length&&C("#locations-mobile-menu-logged-out").prop("checked")&&!1===C("#locations-buddypanel-loggedin").length&&C("#locations-buddypanel-loggedin").prop("checked")&&!1===C("#locations-buddypanel-loggedout").length&&C("#locations-buddypanel-loggedout").prop("checked")?(C("#buddypanel-menu p.button-controls").hide(),C("#buddypanel-menu p.warning").show(),(0<C("#locations-mobile-menu-logged-in").parent().find(".theme-location-set").length||0<C("#locations-mobile-menu-logged-out").parent().find(".theme-location-set").length||0<C("#locations-buddypanel-loggedin").parent().find(".theme-location-set").length||0<C("#locations-buddypanel-loggedout").parent().find(".theme-location-set").length)&&C("#add-buddypanel-sections-nav-menu").hide()):(C("#add-buddypanel-sections-nav-menu").show(),C("#buddypanel-menu p.button-controls").show(),C("#buddypanel-menu p.warning").hide()),window.wpNavMenu.moveMenuItem=function(e,n){var t,i,o,a=C("#menu-to-edit li"),d=a.length,s=e.parents("li.menu-item"),l=s.childMenuItems(),u=s.getItemData(),m=parseInt(s.menuItemDepth(),10),r=parseInt(s.index(),10),c=s.next(),p=c.childMenuItems(),h=parseInt(c.menuItemDepth(),10)+1,g=s.prev(),f=parseInt(g.menuItemDepth(),10),b=g.getItemData()["menu-item-db-id"],w=menus["moved"+n.charAt(0).toUpperCase()+n.slice(1)];switch(n){case"up":if(i=r-1,s.hasClass("menu-item-section")){if(0===r)break;var v=s.prevAll(".menu-item-depth-0:first"),y=parseInt(v.index(),10);s.detach().insertBefore(a.eq(y)).updateParentMenuItemDBId()}else{if(0===r)break;if(0==i&&0!==m&&s.moveHorizontally(0,m),0!==f&&s.moveHorizontally(f,m),g.prev().hasClass("menu-item-section")){var I=parseInt(g.prev().menuItemDepth(),10);s.moveHorizontally(I,m)}l?(t=s.add(l)).detach().insertBefore(a.eq(i)).updateParentMenuItemDBId():s.detach().insertBefore(a.eq(i)).updateParentMenuItemDBId()}break;case"down":if(s.hasClass("menu-item-section")){if(d===r+1)break;var M=r+1;p&&0<p.length&&(M+=p.length),s.moveHorizontally(0,0),s.detach().insertAfter(a.eq(M)).updateParentMenuItemDBId()}else if(l){if(t=s.add(l),(p=0!==(c=a.eq(t.length+r)).childMenuItems().length)&&(o=parseInt(c.menuItemDepth(),10)+1,s.moveHorizontally(o,m)),c.hasClass("menu-item-section")){var k=parseInt(c.menuItemDepth(),10);s.moveHorizontally(k,m)}if(d===r+t.length)break;t.detach().insertAfter(a.eq(r+t.length)).updateParentMenuItemDBId()}else{if(0!==p.length&&s.moveHorizontally(h,m),d===r+1)break;s.detach().insertAfter(a.eq(r+1)).updateParentMenuItemDBId()}break;case"top":if(0===r)break;l?(t=s.add(l)).detach().insertBefore(a.eq(0)).updateParentMenuItemDBId():s.detach().insertBefore(a.eq(0)).updateParentMenuItemDBId();break;case"left":if(s.hasClass("menu-item-section")||g.hasClass("menu-item-section")){if(0===m)break;s.shiftHorizontally(-m)}else{if(0===m)break;s.shiftHorizontally(-1)}break;case"right":if(s.hasClass("menu-item-section")||g.hasClass("menu-item-section")){if(0===r)break;if(u["menu-item-parent-id"]===b)break;s.shiftHorizontally(-m)}else{if(0===r)break;if(u["menu-item-parent-id"]===b)break;s.shiftHorizontally(1)}}e.trigger("focus"),window.wpNavMenu.registerChange(),window.wpNavMenu.refreshKeyboardAccessibility(),window.wpNavMenu.refreshAdvancedAccessibility(),w&&wp.a11y.speak(w)}}},bb_shiftDepthClass:function(e,n,i){return n.each(function(){var e=C(this),n=e.menuItemDepth(),t=n-i;e.removeClass("menu-item-depth-"+n).addClass("menu-item-depth-"+t),0==t&&e.find(".is-submenu").hide()})}},window.BuddyPanelSections.init()}(jQuery);